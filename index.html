<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
		<!-- @TODO: suck these all up w/ webpack -->
    <script src="node_modules/aframe/dist/aframe-master.js"></script>
		<script src="node_modules/aframe-template-component/dist/aframe-template-component.min.js"></script>
		<script src="node_modules/aframe-layout-component/dist/aframe-layout-component.min.js"></script>
		<script src="node_modules/aframe-event-set-component/dist/aframe-event-set-component.min.js"></script>
		<script src="node_modules/aframe-extras/dist/aframe-extras.min.js"></script>
		<script src="./components/collider-check.js"></script>
		<script src="./components/hover-handler.js"></script>
  </head>
  <body>
	  <a-scene debug stats fog="type: linear; color: #AAA">

	    <a-assets>
				<audio id="ambient" src="audio/river.mp3" preload="auto"></audio>
				<script id="checkpoint" type="text/nunjucks">
					<a-cylinder 
						radius="1"
						height="0.1"
						color="#39BB82"
						checkpoint="offset: 0 1.6 0"
						handle-hover>
					</a-cylinder>
	      </script>
			</a-assets>

			<a-grid></a-grid>
			<a-sky color="#6EBAA7"></a-sky>

			<a-entity camera="userHeight: 1.6"
									universal-controls="movementControls: checkpoint"
									checkpoint-controls="mode: animate; animateSpeed: 10.0">
					<a-entity cursor
										position="0 0 -1"
										geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03;"
										material="color: #CCC; shader: flat;">
						  <a-animation begin="click" easing="ease-in" attribute="scale"
               fill="backwards" from="0.5 0.5 0.5" to="1 1 1"></a-animation>
							<a-animation begin="cursor-fusing" easing="ease-in" attribute="scale"
													fill="forwards" from="1 1 1" to="0.5 0.5 0.5"></a-animation>
					</a-entity>
			</a-entity>

			<a-entity position="0 0 0">
				<a-entity position="0 0 0">
					<a-entity template="src: #checkpoint"></a-entity>
				</a-entity>
				<a-entity position="0 0 -10">
					<a-text value="LOOK AT ME!\nCLICK ON ME!" height="5" width="5" align="center" letterspacing="2" position="0 .5 1"></a-text>
					<a-entity template="src: #checkpoint"></a-entity>
				</a-entity>
				<a-entity position="0 0 -20">
					<a-entity template="src: #checkpoint"></a-entity>
				</a-entity>
			</a-entity>

			<a-entity id="ambientNoise" geometry="primitive: plane"
          position="0 0 -10" rotation="-90 0 0" sound="src: #ambient; autoplay: true; loop: true"></a-entity>


			<!-- LIGHTING -->
			<a-light type="ambient" color="#fff" intensity="0.5"></a-light>
			<a-light type="spot" position="-5 5 0" penumbra="0.1" rotation="0 -45 0" angle="65" intensity="0.5"></a-light>

	  </a-scene>
  </body>
</html>
